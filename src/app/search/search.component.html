<div class="page-container">
    <mat-form-field class="search-bar" color="accent">
        <mat-label>Enter</mat-label>
        <input matInput placeholder="Ex. aven*" [value]="query" (input)="onSearchChange($event.target.value)" #box>
    </mat-form-field>

    <div matSort 
        matSortDisableClear
        (matSortChange)="sortData($event)" 
        [matSortActive]="column"
        [matSortDirection]="sort"
        class="input">

        <th mat-sort-header="name">Name</th>
        <th mat-sort-header="modify_time">Time</th>
        <th mat-sort-header="size">Size</th>

    </div>

    <div *ngIf="files?.exception">
        <p class="exception">{{files?.exception}}</p>
    </div>

    <div class="files-container" *ngIf="files?.length > 0">
        <mat-accordion>
            <div *ngFor="let file of files.data;">
                <mat-expansion-panel (click)="onView(file)">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <div class="name">
                                {{file?.name}}
                            </div>
                            <div class="subname">
                                <b>{{file?.size_h}}</b> - {{file?.modify_time_h | date:"medium"}}
                            </div>
                        </mat-panel-title>
                        <!-- <mat-panel-description>
                            
                        </mat-panel-description> -->
                    </mat-expansion-panel-header>
                    <div class="detail">
                        <b>Name:</b> {{file?.name}}
                        <br>
                        <b>Path:</b> {{file?.parent}}
                    </div>
                    <button mat-button (click)="onNav(file)">View Folder</button>
                    <button mat-button (click)="onDownload(file)">Download</button>
                    <button mat-button (click)="onView(file)" [disabled]="file?.suffix!=='mkv'&&file?.suffix!=='mp4'&&file?.suffix!=='avi'">View</button>
                </mat-expansion-panel>
            </div>
        </mat-accordion>
        <br>
    </div>    
</div>

<div class="footer">
    <mat-paginator [pageIndex]="pageIndex" [length]="files?.length" [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions" (page)="paginate($event)">
    </mat-paginator>
</div>